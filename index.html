<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Input Boxes</title>
<style>
    #input-container {
        display: flex;
        flex-wrap: wrap;
    }
    
    .input {
        margin: 5px;
    }
</style>
</head>
<body>
  <div id="input-container"></div>
  <!-- <script >

    document.addEventListener("DOMContentLoaded", function () {
        const inputContainer = document.getElementById("input-container");
      
        // Number of input boxes
        const numInputBoxes = 109;
      
        for (let i = 1; i <= numInputBoxes; i++) {
          const input = document.createElement("input");
          input.type = "text";
        
          // Add an event listener to each input box
          input.addEventListener("input", function () {
            handleInputChange(input);
          });
      
          inputContainer.appendChild(input);
        }
      });
      
      function handleInputChange(input) {
        const inputValue = input.value.toLowerCase();
        const isValid = inputValue === "SAIRAM";
      
        // Change background color based on validity
        input.style.backgroundColor = isValid ? "" : "red";
      }
      
      
  </script> -->
  <!-- <script>
    document.addEventListener("DOMContentLoaded", function () {
        const inputContainer = document.getElementById("input-container");
        const inputs = [];
      
        // Number of input boxes
        const numInputBoxes = 3;
      
        for (let i = 1; i <= numInputBoxes; i++) {
          const input = document.createElement("input");
          input.type = "text";
          input.value = ""; // Empty initially
      
          // Add an event listener to each input box
          input.addEventListener("input", function () {
            handleInputChange(input);
          });
      
          inputs.push({
            element: input,
            success: false, // Flag to track API call success
          });
      
          inputContainer.appendChild(input);
        }
      
        // Focus on the first input box
        inputs[0].element.focus();
      });
      
      function handleInputChange(input) {
        const inputValue = input.value.toLowerCase();
      
        // If the input is valid, call the API and update the input accordingly
        if (inputValue === "sairam" && !input.readOnly) {
          callApi(input);
        } else {
          // Change background color based on validity
          input.style.backgroundColor = "red";
        }
      }
      
      function callApi(input) {
        // Replace the URL with your actual API endpoint
        const apiUrl = "http://localhost:8080/test";
      
        // Make a simple GET request using the Fetch API
        fetch(apiUrl)
        .then(response => response.json())
        .then(data => {
          console.log("API Response:", data);
          if (data.status == 1) {
            input.readOnly = true;
            input.style.backgroundColor = "";
            updateSuccessFlag(input);
            focusNextInput(input);
          }
        })
        .catch(error => {
          console.error("API Error:", error);
        });
      }
      
      function updateSuccessFlag(input) {
        const inputIndex = inputs.findIndex(item => item.element === input);
        if (inputIndex !== -1) {
          inputs[inputIndex].success = true;
        }
      }
      
      function focusNextInput(currentInput) {
        const currentInputIndex = inputs.findIndex(item => item.element === currentInput);
      
        // If the current input is not the last one and its API call was successful, move focus to the next input
        if (currentInputIndex < inputs.length - 1 && inputs[currentInputIndex].success) {
          inputs[currentInputIndex + 1].element.focus();
        }
      }
      
      
  </script> -->

  <!-- <script>
    document.addEventListener("DOMContentLoaded", function () {
        const inputContainer = document.getElementById("input-container");
        const inputs = [];
      
        // Number of input boxes
        const numInputBoxes = 3;
      
        for (let i = 1; i <= numInputBoxes; i++) {
          const input = document.createElement("input");
          input.type = "text";
          input.value = ""; // Empty initially
      
          // Add an event listener to each input box
          input.addEventListener("input", function () {
            handleInputChange(input);
          });
      
          inputs.push({
            element: input,
            success: false, // Flag to track API call success
          });
      
          inputContainer.appendChild(input);
        }
      
        // Focus on the first input box
        inputs[0].element.focus();
      });
      
      function handleInputChange(input) {
        const inputValue = input.value.toLowerCase();
      
        // If the input is valid, call the API and update the input accordingly
        if (inputValue === "sairam" && !input.readOnly) {
          callApi(input).then(() => {
            focusNextInput(input);
          });
        } else {
          // Change background color based on validity
          input.style.backgroundColor = "red";
        }
      }
      
      function callApi(input) {
        // Replace the URL with your actual API endpoint
        const apiUrl = "http://localhost:8080/test";
      
        // Return a Promise to indicate when the API call is complete
        return new Promise((resolve, reject) => {
          // Make a simple GET request using the Fetch API
          fetch(apiUrl)
            .then(response => response.json())
            .then(data => {
              console.log("API Response:", data);
      
              // If the API call is successful, make the input read-only and update the success flag
              if (data.status == 1) {
                input.readOnly = true;
                input.style.backgroundColor = ""; // Reset background color
                updateSuccessFlag(input);
                resolve();
              } else {
                reject(new Error("API call unsuccessful"));
              }
            })
            .catch(error => {
              console.error("API Error:", error);
              reject(error);
            });
        });
      }
      
      function updateSuccessFlag(input) {
        const inputIndex = inputs.findIndex(item => item.element === input);
        if (inputIndex !== -1) {
          inputs[inputIndex].success = true;
        }
      }
      
      function focusNextInput(currentInput) {
        const currentInputIndex = inputs.findIndex(item => item.element === currentInput);
      
        // If the current input is not the last one and its API call was successful, move focus to the next input
        if (currentInputIndex < inputs.length - 1 && inputs[currentInputIndex].success) {
          inputs[currentInputIndex + 1].element.focus();
        }
      }
      
  </script> -->

  <script>
    document.addEventListener("DOMContentLoaded", function () {
        const inputContainer = document.getElementById("input-container");
      
        // Number of input boxes
        const numInputBoxes = 108; // Adjust the number as needed
      
        for (let i = 1; i <= numInputBoxes; i++) {
          const input = document.createElement("input");
          input.type = "text";
          input.value = ""; // Empty initially
      
          // Add an event listener to each input box
          input.addEventListener("input", function () {
            handleInputChange(input);
          });
      
          inputContainer.appendChild(input);
        }
      
        // Focus on the first input box
        inputContainer.firstChild.focus();
      });
      
      function handleInputChange(input) {
        const inputValue = input.value.toLowerCase();
      
        // If the input is valid, call the API and update the input accordingly
        if (inputValue === "sairam" && !input.readOnly) {
          callApi(input)
            .then(() => {
              focusNextInput(input);
            })
            .catch(error => console.error(error));
        } else {
          // Change background color based on validity
          input.style.backgroundColor = "red";
        }
      }
      
      function callApi(input) {
        // Replace the URL with your actual API endpoint
        const apiUrl = "http://localhost:8080/test";
      
        // Return a Promise to indicate when the API call is complete
        return fetch(apiUrl)
          .then(response => response.json())
          .then(data => {
            console.log("API Response:", data);
      
            // If the API call is successful, make the input read-only
            if (data.status ==1) {
              input.readOnly = true;
              input.style.backgroundColor = ""; // Reset background color
            }
          })
          .catch(error => {
            console.error("API Error:", error);
            throw error;
          });
      }
      
      function focusNextInput(currentInput) {
        const nextInput = currentInput.nextElementSibling;
      
        // If the next input exists and its API call was successful, move focus to it
        if (nextInput && !nextInput.readOnly) {
          nextInput.focus();
        }
      }
      
  </script>

</body>
</html>
